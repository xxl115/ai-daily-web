<!--
  FilterTags ç»„ä»¶åŸå‹
  å¯¹åº”åç»­ React ç»„ä»¶: components/filters/FilterTags.tsx
  
  åŠŸèƒ½:
  - æ˜¾ç¤ºå½“å‰æ´»è·ƒçš„ç­›é€‰æ¡ä»¶
  - æ”¯æŒå•ä¸ªæ ‡ç­¾ç§»é™¤
  - æ”¯æŒä¸€é”®æ¸…é™¤å…¨éƒ¨
  - åŠ¨æ€æ›´æ–°çŠ¶æ€
  
  è®¾è®¡ç‰¹ç‚¹:
  - æ ‡ç­¾ç»„å®¹å™¨
  - å¯å…³é—­çš„æ ‡ç­¾æ ·å¼
  - æ‚¬åœå’Œç‚¹å‡»åé¦ˆ
-->
<div id="filterTags" class="mt-4 flex flex-wrap gap-2 items-center">
    <span class="text-sm text-gray-500 mr-2">å½“å‰ç­›é€‰:</span>
    
    <!-- æ´»è·ƒç­›é€‰æ ‡ç­¾å®¹å™¨ -->
    <div id="activeFilterTags" class="flex flex-wrap gap-2">
        <!-- ç¤ºä¾‹æ ‡ç­¾ç»“æ„ (å®é™…ç”± JS åŠ¨æ€ç”Ÿæˆ)
        <span class="inline-flex items-center gap-1.5 px-3 py-1.5 bg-primary/10 text-primary rounded-full text-sm font-medium">
            <span>ä»Šæ—¥</span>
            <button onclick="removeTimeFilter()" class="hover:text-red-500 transition-colors">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>
        </span>
        <span class="inline-flex items-center gap-1.5 px-3 py-1.5 bg-primary/10 text-primary rounded-full text-sm font-medium">
            <span>OpenAI</span>
            <button onclick="removeSourceFilter()" class="hover:text-red-500 transition-colors">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>
        </span>
        <span class="inline-flex items-center gap-1.5 px-3 py-1.5 bg-primary/10 text-primary rounded-full text-sm font-medium">
            <span>LLM</span>
            <button onclick="removeTagFilter()" class="hover:text-red-500 transition-colors">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>
        </span>
        -->
    </div>
    
    <!-- æ¸…é™¤å…¨éƒ¨æŒ‰é’® (æœ‰ç­›é€‰æ—¶æ˜¾ç¤º) -->
    <button 
        id="clearAllFilters" 
        class="hidden text-sm text-gray-500 hover:text-primary transition-colors flex items-center gap-1"
        onclick="FilterTags.clearAll()"
    >
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
        </svg>
        æ¸…é™¤å…¨éƒ¨
    </button>
    
    <!-- ç©ºçŠ¶æ€ (æ— ç­›é€‰æ—¶æ˜¾ç¤º) -->
    <span id="noFiltersMessage" class="text-sm text-gray-400">
        æš‚æ— ç­›é€‰æ¡ä»¶
    </span>
</div>

<!--
  FilterTags äº¤äº’é€»è¾‘ (JavaScript)
-->
<script>
    /**
     * FilterTags ç»„ä»¶
     * ç®¡ç†æ´»è·ƒç­›é€‰æ ‡ç­¾çš„æ˜¾ç¤ºå’Œäº¤äº’
     */
    const FilterTags = {
        // å½“å‰æ´»è·ƒçš„ç­›é€‰æ ‡ç­¾
        activeFilters: [],
        
        // æ ‡ç­¾é…ç½®
        tagConfig: {
            // æ—¶é—´ç­›é€‰
            today: { label: 'ä»Šæ—¥', icon: 'ğŸ•', type: 'time', description: '24å°æ—¶å†…' },
            yesterday: { label: 'æ˜¨æ—¥', icon: 'ğŸ“…', type: 'time', description: 'æ˜¨å¤©' },
            week: { label: 'æœ¬å‘¨', icon: 'ğŸ“†', type: 'time', description: '7å¤©å†…' },
            month: { label: 'æœ¬æœˆ', icon: 'ğŸ—“ï¸', type: 'time', description: '30å¤©å†…' },
            
            // æ¥æº
            openai: { label: 'OpenAI', icon: 'ğŸ¢', type: 'source', color: '#10A37F' },
            google: { label: 'Google AI', icon: 'ğŸ¢', type: 'source', color: '#4285F4' },
            anthropic: { label: 'Anthropic', icon: 'ğŸ¢', type: 'source', color: '#DCA579' },
            mit: { label: 'MIT', icon: 'ğŸ“', type: 'source', color: '#A31F34' },
            wired: { label: 'Wired', icon: 'ğŸ“°', type: 'source', color: '#000000' },
            
            // æ ‡ç­¾
            'LLM': { label: 'LLM', icon: 'ğŸ·ï¸', type: 'tag', color: '#FF6154' },
            'GPT-4': { label: 'GPT-4', icon: 'ğŸ¤–', type: 'tag', color: '#FF6154' },
            'AIç»˜ç”»': { label: 'AIç»˜ç”»', icon: 'ğŸ¨', type: 'tag', color: '#FF6154' },
            'Claude': { label: 'Claude', icon: 'ğŸ¤–', type: 'tag', color: '#FF6154' },
            'å¼€æº': { label: 'å¼€æº', icon: 'ğŸ”“', type: 'tag', color: '#FF6154' },
            
            // æ’åº (ç‰¹æ®Šæ˜¾ç¤º)
            hot: { label: 'çƒ­åº¦ä¼˜å…ˆ', icon: 'ğŸ”¥', type: 'sort' },
            newest: { label: 'æœ€æ–°å‘å¸ƒ', icon: 'ğŸ•', type: 'sort' },
            relevant: { label: 'ç›¸å…³æ€§', icon: 'ğŸ“Š', type: 'sort' }
        },
        
        // DOM å…ƒç´ 
        elements: {
            container: document.getElementById('filterTags'),
            tagsContainer: document.getElementById('activeFilterTags'),
            clearBtn: document.getElementById('clearAllFilters'),
            noFiltersMsg: document.getElementById('noFiltersMessage')
        },
        
        /**
         * æ·»åŠ ç­›é€‰æ ‡ç­¾
         * @param {string} key - ç­›é€‰é”®
         * @param {*} value - ç­›é€‰å€¼
         */
        addFilter(key, value) {
            // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨
            const exists = this.activeFilters.some(f => f.key === key && f.value === value);
            if (exists) return;
            
            // æ·»åŠ åˆ°æ´»è·ƒåˆ—è¡¨
            this.activeFilters.push({ key, value });
            this.render();
        },
        
        /**
         * ç§»é™¤ç­›é€‰æ ‡ç­¾
         * @param {string} key - ç­›é€‰é”®
         * @param {*} value - ç­›é€‰å€¼
         */
        removeFilter(key, value) {
            const index = this.activeFilters.findIndex(f => f.key === key && f.value === value);
            if (index > -1) {
                this.activeFilters.splice(index, 1);
                this.render();
                
                // è§¦å‘ç§»é™¤äº‹ä»¶
                this.dispatchEvent('filterRemove', { key, value });
            }
        },
        
        /**
         * æ¸…é™¤æ‰€æœ‰ç­›é€‰
         */
        clearAll() {
            this.activeFilters = [];
            this.render();
            
            // è§¦å‘æ¸…é™¤äº‹ä»¶
            this.dispatchEvent('filterClear', {});
        },
        
        /**
         * è®¾ç½®æ‰€æœ‰ç­›é€‰ (è¦†ç›–)
         * @param {Array} filters - ç­›é€‰æ•°ç»„
         */
        setFilters(filters) {
            this.activeFilters = [...filters];
            this.render();
        },
        
        /**
         * è·å–æ´»è·ƒç­›é€‰æ•°é‡
         */
        getCount() {
            return this.activeFilters.length;
        },
        
        /**
         * æ¸²æŸ“æ ‡ç­¾
         */
        render() {
            const { tagsContainer, clearBtn, noFiltersMsg } = this.elements;
            
            // æ¸…ç©ºå®¹å™¨
            tagsContainer.innerHTML = '';
            
            if (this.activeFilters.length === 0) {
                // ç©ºçŠ¶æ€
                clearBtn.classList.add('hidden');
                noFiltersMsg.classList.remove('hidden');
                return;
            }
            
            // éšè—ç©ºçŠ¶æ€æ¶ˆæ¯
            clearBtn.classList.remove('hidden');
            noFiltersMsg.classList.add('hidden');
            
            // æ¸²æŸ“æ¯ä¸ªæ ‡ç­¾
            this.activeFilters.forEach(filter => {
                const tag = this.tagConfig[filter.value] || { 
                    label: filter.value, 
                    icon: 'ğŸ·ï¸',
                    type: 'custom'
                };
                
                const tagElement = document.createElement('span');
                tagElement.className = 'inline-flex items-center gap-1.5 px-3 py-1.5 bg-primary/10 text-primary rounded-full text-sm font-medium animate-fadeIn';
                tagElement.dataset.key = filter.key;
                tagElement.dataset.value = filter.value;
                
                tagElement.innerHTML = `
                    <span>${tag.icon} ${tag.label}</span>
                    <button 
                        class="ml-0.5 text-primary/60 hover:text-red-500 transition-colors p-0.5 rounded-full hover:bg-red-100"
                        onclick="FilterTags.removeFilter('${filter.key}', '${filter.value}')"
                        aria-label="ç§»é™¤ç­›é€‰"
                    >
                        <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                        </svg>
                    </button>
                `;
                
                tagsContainer.appendChild(tagElement);
            });
        },
        
        /**
         * æ´¾å‘è‡ªå®šä¹‰äº‹ä»¶
         * @param {string} name - äº‹ä»¶åç§°
         * @param {Object} detail - äº‹ä»¶æ•°æ®
         */
        dispatchEvent(name, detail) {
            const event = new CustomEvent(`filterTag:${name}`, { detail });
            document.dispatchEvent(event);
        },
        
        /**
         * åˆå§‹åŒ–ç¤ºä¾‹æ•°æ®
         */
        initDemo() {
            // æ·»åŠ ä¸€äº›ç¤ºä¾‹ç­›é€‰æ ‡ç­¾
            this.addFilter('time', 'today');
            this.addFilter('source', 'openai');
            this.addFilter('tag', 'LLM');
        }
    };
    
    // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', () => {
        // å¯é€‰ï¼šåˆå§‹åŒ–æ¼”ç¤ºæ•°æ®
        // FilterTags.initDemo();
    });
</script>

<!--
  ç»„ä»¶æ ·å¼ (å†…è”ï¼Œå®Œæ•´æ ·å¼åœ¨ main.css ä¸­)
-->
<style>
    #filterTags .inline-flex {
        animation: fadeInUp 0.2s ease-out;
    }
    
    #filterTags .inline-flex button:hover {
        transform: scale(1.1);
    }
    
    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(-5px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
</style>
